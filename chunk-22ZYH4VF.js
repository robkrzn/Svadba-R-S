import{c as h,e as y,g as U}from"./chunk-K7KWIIKY.js";import{b as x,c as S,d as _,e as w,g as M,h as P,i as z,j as D,l as E}from"./chunk-MKK5OKK4.js";import{Da as d,Ia as c,Ka as o,La as i,Ma as f,Oa as g,Pa as u,Qa as r,Sa as v,d as m,jb as b,kb as C,pb as F,ra as s,va as l,za as p}from"./chunk-J2UMMFTY.js";function I(n,e){if(n&1&&(o(0,"div",13),r(1),i()),n&2){let t=u();s(),v(" ",t.errorMessage," ")}}function k(n,e){n&1&&(o(0,"span"),r(1,"Vst\xFApi\u0165"),i())}function B(n,e){n&1&&(o(0,"span"),r(1,"Overujem..."),i())}var O=class n{constructor(e,t,a,A,N){this.formBuilder=e;this.router=t;this.route=a;this.authService=A;this.firebaseService=N;this.loginForm=this.formBuilder.group({accessCode:["",S.required]})}loginForm;errorMessage="";loading=!1;testCode=null;ngOnInit(){return m(this,null,function*(){try{this.testCode=yield this.firebaseService.getTestCode(),console.log("Na\u010D\xEDtan\xFD TestCode z Firestore:",this.testCode)}catch(e){console.error("Chyba pri na\u010D\xEDtan\xED TestCode",e)}this.route.queryParams.subscribe(e=>{e.code&&this.verifyCodeFromUrl(e.code)})})}verifyCodeFromUrl(e){return m(this,null,function*(){try{(yield this.authService.login(e))?this.router.navigate(["/info"]):console.log("K\xF3d z URL je nespr\xE1vny")}catch(t){console.error("Chyba pri overovan\xED k\xF3du z URL",t)}})}onSubmit(){return m(this,null,function*(){if(this.loginForm.invalid)return;this.loading=!0,this.errorMessage="";let e=this.loginForm.get("accessCode")?.value;try{(yield this.authService.login(e))?(console.log("Spr\xE1vny k\xF3d:",e),this.router.navigate(["/info"])):this.errorMessage="Nespr\xE1vny pr\xEDstupov\xFD k\xF3d. Sk\xFAste to znova."}catch(t){console.error("Chyba pri prihlasovan\xED",t),this.errorMessage="Nastala chyba pri overovan\xED k\xF3du. Sk\xFAste to pros\xEDm nesk\xF4r."}finally{this.loading=!1}})}static \u0275fac=function(t){return new(t||n)(l(D),l(y),l(h),l(U),l(F))};static \u0275cmp=p({type:n,selectors:[["app-login"]],decls:19,vars:5,consts:[[1,"login-container"],[1,"login-card"],[1,"title"],[1,"subtitle"],[1,"form-container"],[1,"access-label"],[3,"ngSubmit","formGroup"],[1,"input-group"],["type","text","formControlName","accessCode","placeholder","",1,"code-input"],["class","error-message",4,"ngIf"],["type","submit",1,"submit-button",3,"disabled"],[4,"ngIf"],[1,"welcome-message"],[1,"error-message"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"R&S"),i(),o(4,"p",3),r(5,"na\u0161a svadba"),i(),o(6,"div",4)(7,"p",5),r(8,"Pr\xEDstupov\xFD k\xF3d"),i(),o(9,"form",6),g("ngSubmit",function(){return a.onSubmit()}),o(10,"div",7),f(11,"input",8),i(),d(12,I,2,1,"div",9),o(13,"button",10),d(14,k,2,0,"span",11)(15,B,2,0,"span",11),i()()(),o(16,"div",12)(17,"p"),r(18,"Srde\u010Dne V\xE1s v\xEDtame na na\u0161om svadobnom webe"),i()()()()),t&2&&(s(9),c("formGroup",a.loginForm),s(3),c("ngIf",a.errorMessage),s(),c("disabled",a.loading),s(),c("ngIf",!a.loading),s(),c("ngIf",a.loading))},dependencies:[C,b,E,M,x,_,w,P,z],styles:['@font-face{font-family:Cinzel;font-style:normal;font-weight:400 900;font-display:swap;src:url(https://fonts.gstatic.com/s/cinzel/v23/8vIJ7ww63mVu7gt7-GT7LEc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Cinzel;font-style:normal;font-weight:400 900;font-display:swap;src:url(https://fonts.gstatic.com/s/cinzel/v23/8vIJ7ww63mVu7gt79mT7.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f5f7ec}.login-container[_ngcontent-%COMP%]{width:100%;max-width:500px;padding:20px}.login-card[_ngcontent-%COMP%]{background-color:#ddbea9;border-radius:20px;padding:40px 20px;box-shadow:0 8px 24px #0000001a;position:relative;overflow:hidden}.title[_ngcontent-%COMP%]{font-family:Cinzel,serif;font-weight:700;font-size:4rem;color:#6b705c;text-align:center;margin:0}.subtitle[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;font-size:1.5rem;color:#6b705c;text-align:center;margin-top:0}.form-container[_ngcontent-%COMP%]{margin:40px 0}.access-label[_ngcontent-%COMP%]{font-family:Cinzel,serif;color:#6b705c;font-size:1.2rem;text-align:center;margin-bottom:10px}.code-input[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #c58c6e;border-radius:8px;background-color:#e9cbc1;font-family:Cinzel,serif;font-size:1.1rem;color:#6b705c;text-align:center}.code-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#6b705c}.error-message[_ngcontent-%COMP%]{color:#b22222;font-family:Cinzel,serif;font-size:.9rem;text-align:center;margin-top:10px}.submit-button[_ngcontent-%COMP%]{display:block;width:100%;background-color:#c58c6e;color:#fff;font-family:Cinzel,serif;border:none;border-radius:8px;padding:12px;margin-top:20px;font-size:1.1rem;cursor:pointer;transition:background-color .3s}.submit-button[_ngcontent-%COMP%]:hover{background-color:#6b705c}.welcome-message[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;background-color:#d4a7ac;padding:20px;border-top-left-radius:30px;width:50%}.welcome-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;color:#6b705c;font-size:1rem;text-align:center;margin:0}']})};export{O as LoginComponent};
