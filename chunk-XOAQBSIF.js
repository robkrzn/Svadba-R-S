import{a as z,b as D,c as h,d as V,e as N,f as T,g as j,h as L,i as B,j as G,k as K,l as q}from"./chunk-FAU54MXO.js";import{Da as g,Ia as l,Ka as i,La as n,Ma as v,Na as _,Oa as f,Pa as m,Qa as r,Ra as x,Sa as b,Ta as y,Ua as k,Va as E,Xa as P,Y as u,Z as p,d as C,hb as A,ib as F,jb as w,kb as S,pb as I,ra as c,va as M,za as O}from"./chunk-JPVDX6ZS.js";var W=(o,t)=>({error:o,success:t}),R=(o,t)=>({active:o,inactive:t});function $(o,t){if(o&1){let e=_();i(0,"div",5)(1,"p",6),r(2,"Prihl\xE1ste sa pre spr\xE1vu pr\xEDstupov\xFDch k\xF3dov"),n(),i(3,"div",7)(4,"input",8),E("ngModelChange",function(a){u(e);let s=m();return k(s.passwordInput,a)||(s.passwordInput=a),p(a)}),n(),i(5,"button",9),f("click",function(){u(e);let a=m();return p(a.login())}),r(6,"Prihl\xE1si\u0165 sa"),n()()()}if(o&2){let e=m();c(4),y("ngModel",e.passwordInput)}}function Z(o,t){o&1&&(i(0,"div",31),r(1," K\xF3d je povinn\xFD "),n())}function H(o,t){o&1&&(i(0,"div",31),r(1," K\xF3d mus\xED ma\u0165 aspo\u0148 4 znaky "),n())}function J(o,t){o&1&&(i(0,"div",31),r(1," Meno/popis je povinn\xFD "),n())}function Q(o,t){if(o&1){let e=_();i(0,"button",32),f("click",function(){u(e);let a=m(2);return p(a.resetForm())}),r(1," Zru\u0161i\u0165 "),n()}}function X(o,t){if(o&1&&(i(0,"div",33),r(1),n()),o&2){let e=m(2);l("ngClass",P(2,W,e.isError,!e.isError)),c(),b(" ",e.message," ")}}function Y(o,t){o&1&&(i(0,"div",34),r(1,"Na\u010D\xEDtavam..."),n())}function ee(o,t){o&1&&(i(0,"div",35),r(1,"\u017Diadne pr\xEDstupov\xE9 k\xF3dy neboli n\xE1jden\xE9"),n())}function te(o,t){if(o&1){let e=_();i(0,"tr")(1,"td"),r(2),n(),i(3,"td"),r(4),n(),i(5,"td")(6,"span",37),r(7),n()(),i(8,"td",38)(9,"button",39),f("click",function(){let a=u(e).$implicit,s=m(3);return p(s.editAccessCode(a))}),r(10,"Upravi\u0165"),n(),i(11,"button",40),f("click",function(){let a=u(e).$implicit,s=m(3);return p(s.toggleStatus(a))}),r(12),n()()()}if(o&2){let e=t.$implicit;c(2),x(e.code),c(2),x(e.name),c(2),l("ngClass",P(5,R,e.isActive,!e.isActive)),c(),b(" ",e.isActive?"Akt\xEDvny":"Neakt\xEDvny"," "),c(5),b(" ",e.isActive?"Deaktivova\u0165":"Aktivova\u0165"," ")}}function ne(o,t){if(o&1&&(i(0,"table")(1,"thead")(2,"tr")(3,"th"),r(4,"K\xF3d"),n(),i(5,"th"),r(6,"Meno/popis"),n(),i(7,"th"),r(8,"Stav"),n(),i(9,"th"),r(10,"Akcie"),n()()(),i(11,"tbody"),g(12,te,13,8,"tr",36),n()()),o&2){let e=m(2);c(12),l("ngForOf",e.accessCodes)}}function oe(o,t){if(o&1){let e=_();i(0,"div",10)(1,"div",11)(2,"p",6),r(3,"Spr\xE1va pr\xEDstupov\xFDch k\xF3dov"),n(),i(4,"button",12),f("click",function(){u(e);let a=m();return p(a.logout())}),r(5,"Odhl\xE1si\u0165 sa"),n()(),i(6,"div",13)(7,"h2"),r(8),n(),i(9,"form",14),f("ngSubmit",function(){u(e);let a=m();return p(a.onSubmit())}),i(10,"div",15)(11,"label",16),r(12,"Pr\xEDstupov\xFD k\xF3d:"),n(),v(13,"input",17),g(14,Z,2,0,"div",18)(15,H,2,0,"div",18),n(),i(16,"div",15)(17,"label",19),r(18,"Meno/popis:"),n(),v(19,"input",20),g(20,J,2,0,"div",18),n(),i(21,"div",21)(22,"label"),v(23,"input",22),r(24," Akt\xEDvny "),n()(),i(25,"div",23)(26,"button",24),r(27),n(),g(28,Q,2,0,"button",25),n()()(),g(29,X,2,5,"div",26),i(30,"div",27)(31,"h2"),r(32,"Existuj\xFAce k\xF3dy"),n(),g(33,Y,2,0,"div",28)(34,ee,2,0,"div",29)(35,ne,13,1,"table",30),n()()}if(o&2){let e,d,a,s=m();c(8),x(s.editMode?"Upravi\u0165 k\xF3d":"Prida\u0165 nov\xFD k\xF3d"),c(),l("formGroup",s.codeForm),c(5),l("ngIf",((e=s.codeForm.get("code"))==null||e.errors==null?null:e.errors.required)&&((e=s.codeForm.get("code"))==null?null:e.touched)),c(),l("ngIf",(d=s.codeForm.get("code"))==null||d.errors==null?null:d.errors.minlength),c(5),l("ngIf",((a=s.codeForm.get("name"))==null||a.errors==null?null:a.errors.required)&&((a=s.codeForm.get("name"))==null?null:a.touched)),c(6),l("disabled",s.codeForm.invalid),c(),b(" ",s.editMode?"Ulo\u017Ei\u0165 zmeny":"Prida\u0165 k\xF3d"," "),c(),l("ngIf",s.editMode),c(),l("ngIf",s.message),c(4),l("ngIf",s.isLoading),c(),l("ngIf",!s.isLoading&&s.accessCodes.length===0),c(),l("ngIf",s.accessCodes.length>0)}}var U=class o{constructor(t,e){this.firebaseService=t;this.formBuilder=e;this.codeForm=this.formBuilder.group({code:["",[h.required,h.minLength(4)]],name:["",h.required],isActive:[!0]})}accessCodes=[];codeForm;editMode=!1;currentEditId=null;isLoading=!0;message="";isError=!1;adminPassword="admin123";isAuthenticated=!1;passwordInput="";ngOnInit(){}login(){this.passwordInput===this.adminPassword?(this.isAuthenticated=!0,this.loadAccessCodes()):(this.message="Nespr\xE1vne heslo",this.isError=!0)}loadAccessCodes(){this.isLoading=!0,this.firebaseService.getAccessCodes().subscribe(t=>{this.accessCodes=t,this.isLoading=!1},t=>{console.error("Chyba pri na\u010D\xEDtan\xED k\xF3dov",t),this.message="Nastala chyba pri na\u010D\xEDtan\xED pr\xEDstupov\xFDch k\xF3dov",this.isError=!0,this.isLoading=!1})}onSubmit(){return C(this,null,function*(){if(this.codeForm.invalid)return;let t=this.codeForm.value,e={code:t.code,name:t.name,isActive:t.isActive};try{this.editMode&&this.currentEditId?(yield this.firebaseService.updateAccessCode(this.currentEditId,e),this.resetForm(),this.message="K\xF3d bol \xFAspe\u0161ne aktualizovan\xFD",this.isError=!1):(yield this.firebaseService.addAccessCode(e),this.resetForm(),this.message="Nov\xFD k\xF3d bol \xFAspe\u0161ne pridan\xFD",this.isError=!1),this.loadAccessCodes()}catch(d){console.error("Chyba pri oper\xE1cii s k\xF3dom",d),this.message="Nastala chyba pri oper\xE1cii s k\xF3dom",this.isError=!0}})}editAccessCode(t){this.editMode=!0,this.currentEditId=t.id,this.codeForm.setValue({code:t.code,name:t.name||"",isActive:t.isActive})}deleteAccessCode(t){return C(this,null,function*(){if(confirm("Naozaj chcete odstr\xE1ni\u0165 tento pr\xEDstupov\xFD k\xF3d?"))try{yield this.firebaseService.deleteAccessCode(t),this.message="K\xF3d bol \xFAspe\u0161ne odstr\xE1nen\xFD",this.isError=!1,this.loadAccessCodes()}catch(e){console.error("Chyba pri odstr\xE1nen\xED k\xF3du",e),this.message="Nastala chyba pri odstr\xE1nen\xED k\xF3du",this.isError=!0}})}toggleStatus(t){return C(this,null,function*(){let e=!t.isActive;try{yield this.firebaseService.updateAccessCode(t.id,{isActive:e}),this.message=`K\xF3d bol ${e?"aktivovan\xFD":"deaktivovan\xFD"}`,this.isError=!1,this.loadAccessCodes()}catch(d){console.error("Chyba pri zmene stavu k\xF3du",d),this.message="Nastala chyba pri zmene stavu k\xF3du",this.isError=!0}})}resetForm(){this.codeForm.reset({isActive:!0}),this.editMode=!1,this.currentEditId=null}logout(){this.isAuthenticated=!1,this.passwordInput="",this.accessCodes=[]}static \u0275fac=function(e){return new(e||o)(M(I),M(G))};static \u0275cmp=O({type:o,selectors:[["app-admin"]],decls:6,vars:2,consts:[[1,"admin-container"],[1,"admin-card"],[1,"title"],["class","login-section",4,"ngIf"],["class","admin-section",4,"ngIf"],[1,"login-section"],[1,"subtitle"],[1,"admin-form"],["type","password","placeholder","Admin heslo",1,"admin-input",3,"ngModelChange","ngModel"],[1,"admin-button",3,"click"],[1,"admin-section"],[1,"action-bar"],[1,"logout-button",3,"click"],[1,"code-form"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","code"],["type","text","id","code","formControlName","code",1,"admin-input"],["class","error-text",4,"ngIf"],["for","name"],["type","text","id","name","formControlName","name",1,"admin-input"],[1,"form-group","checkbox-group"],["type","checkbox","formControlName","isActive"],[1,"form-buttons"],["type","submit",1,"admin-button",3,"disabled"],["type","button","class","cancel-button",3,"click",4,"ngIf"],["class","message",3,"ngClass",4,"ngIf"],[1,"codes-list"],["class","loading",4,"ngIf"],["class","no-data",4,"ngIf"],[4,"ngIf"],[1,"error-text"],["type","button",1,"cancel-button",3,"click"],[1,"message",3,"ngClass"],[1,"loading"],[1,"no-data"],[4,"ngFor","ngForOf"],[1,"status",3,"ngClass"],[1,"actions"],[1,"action-button","edit",3,"click"],[1,"action-button","toggle",3,"click"]],template:function(e,d){e&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Admin Panel"),n(),g(4,$,7,1,"div",3)(5,oe,36,12,"div",4),n()()),e&2&&(c(4),l("ngIf",!d.isAuthenticated),c(),l("ngIf",d.isAuthenticated))},dependencies:[S,A,F,w,q,j,D,z,V,N,L,B,K,T],styles:['@font-face{font-family:Lucy Rose;src:url(/assets/fonts/lucyrose.woff2) format("woff2")}@font-face{font-family:Coldiac;src:url(/assets/fonts/coldiac.woff2) format("woff2")}@font-face{font-family:Dream Avenue;src:url(/assets/fonts/dreamavenue.woff2) format("woff2")}@font-face{font-family:Cinzel;src:url(/assets/fonts/cinzel.woff2) format("woff2")}[_nghost-%COMP%]{display:block;min-height:100vh;background-color:#f5f7ec;padding:20px}.admin-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.admin-card[_ngcontent-%COMP%]{background-color:#ddbea9;border-radius:20px;padding:30px;box-shadow:0 8px 24px #0000001a}.title[_ngcontent-%COMP%]{font-family:Dream Avenue,cursive;font-size:2.5rem;color:#6b705c;text-align:center;margin-top:0;margin-bottom:20px}.subtitle[_ngcontent-%COMP%]{font-family:Coldiac,sans-serif;font-size:1.2rem;color:#6b705c;text-align:center}.admin-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;margin-top:20px}.admin-input[_ngcontent-%COMP%]{padding:12px;border:2px solid #c58c6e;border-radius:8px;background-color:#e9cbc1;font-family:Cinzel,serif;font-size:1rem;color:#6b705c}.admin-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#6b705c}.admin-button[_ngcontent-%COMP%]{background-color:#c58c6e;color:#fff;font-family:Cinzel,serif;border:none;border-radius:8px;padding:12px;font-size:1rem;cursor:pointer;transition:background-color .3s}.admin-button[_ngcontent-%COMP%]:hover{background-color:#6b705c}.admin-button[_ngcontent-%COMP%]:disabled{background-color:#b8b7a5;cursor:not-allowed}.cancel-button[_ngcontent-%COMP%]{background-color:#b8b7a5;color:#6b705c;font-family:Cinzel,serif;border:none;border-radius:8px;padding:12px;font-size:1rem;cursor:pointer;transition:background-color .3s}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#6b705c;color:#fff}.logout-button[_ngcontent-%COMP%]{background-color:#d4a7ac;color:#6b705c;font-family:Cinzel,serif;border:none;border-radius:8px;padding:8px 16px;font-size:.9rem;cursor:pointer;transition:background-color .3s}.logout-button[_ngcontent-%COMP%]:hover{background-color:#c58c6e;color:#fff}.action-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.code-form[_ngcontent-%COMP%]{background-color:#e9cbc1;border-radius:12px;padding:20px;margin-bottom:30px}.code-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Cinzel,serif;color:#6b705c;font-size:1.5rem;margin-top:0;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-family:Coldiac,sans-serif;color:#6b705c;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px}.form-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-start;margin-top:20px}.message[_ngcontent-%COMP%]{padding:12px;border-radius:8px;margin-bottom:20px;font-family:Coldiac,sans-serif}.message.success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.message.error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.error-text[_ngcontent-%COMP%]{color:#721c24;font-size:.9rem;margin-top:5px;font-family:Coldiac,sans-serif}.codes-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Cinzel,serif;color:#6b705c;font-size:1.5rem;margin-bottom:15px}.codes-list[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%], .codes-list[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;font-family:Coldiac,sans-serif;color:#6b705c;padding:20px}.codes-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#e9cbc1;border-radius:8px;overflow:hidden;font-family:Coldiac,sans-serif}.codes-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .codes-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;text-align:left}.codes-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#c58c6e;color:#fff;font-family:Cinzel,serif;font-weight:400}.codes-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#ffffff1a}.codes-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#fff3}.codes-list[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{padding:5px 10px;border-radius:12px;font-size:.9rem}.codes-list[_ngcontent-%COMP%]   .status.active[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.codes-list[_ngcontent-%COMP%]   .status.inactive[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.codes-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:5px}.codes-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{border:none;border-radius:4px;padding:5px 10px;font-size:.8rem;font-family:Cinzel,serif;cursor:pointer;transition:all .2s}.codes-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .action-button.edit[_ngcontent-%COMP%]{background-color:#af9fc4;color:#fff}.codes-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .action-button.edit[_ngcontent-%COMP%]:hover{background-color:#957fb1}.codes-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .action-button.toggle[_ngcontent-%COMP%]{background-color:#ddbea9;color:#6b705c}.codes-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .action-button.toggle[_ngcontent-%COMP%]:hover{background-color:#cfa284}.codes-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .action-button.delete[_ngcontent-%COMP%]{background-color:#d4a7ac;color:#fff}.codes-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .action-button.delete[_ngcontent-%COMP%]:hover{background-color:#c3858c}']})};export{U as AdminComponent};
