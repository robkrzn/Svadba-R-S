import{c as h,e as y,g as S}from"./chunk-FU6JWKEY.js";import{b as _,c as M,d as w,e as F,g as P,h as O,i as z,j as k,l as I}from"./chunk-FAU54MXO.js";import{Da as d,Ia as l,Ka as o,La as i,Ma as p,Oa as u,Pa as g,Qa as r,Sa as v,d as m,jb as b,kb as C,pb as x,ra as s,va as c,za as f}from"./chunk-JPVDX6ZS.js";function D(n,e){if(n&1&&(o(0,"div",13),r(1),i()),n&2){let t=g();s(),v(" ",t.errorMessage," ")}}function R(n,e){n&1&&(o(0,"span"),r(1,"Vst\xFApi\u0165"),i())}function A(n,e){n&1&&(o(0,"span"),r(1,"Overujem..."),i())}var E=class n{constructor(e,t,a,N,L){this.formBuilder=e;this.router=t;this.route=a;this.authService=N;this.firebaseService=L;this.loginForm=this.formBuilder.group({accessCode:["",M.required]})}loginForm;errorMessage="";loading=!1;testCode=null;ngOnInit(){return m(this,null,function*(){try{this.testCode=yield this.firebaseService.getTestCode(),console.log("Na\u010D\xEDtan\xFD TestCode z Firestore:",this.testCode)}catch(e){console.error("Chyba pri na\u010D\xEDtan\xED TestCode",e)}this.route.queryParams.subscribe(e=>{e.code&&this.verifyCodeFromUrl(e.code)})})}verifyCodeFromUrl(e){return m(this,null,function*(){try{(yield this.authService.login(e))?this.router.navigate(["/info"]):console.log("K\xF3d z URL je nespr\xE1vny")}catch(t){console.error("Chyba pri overovan\xED k\xF3du z URL",t)}})}onSubmit(){return m(this,null,function*(){if(this.loginForm.invalid)return;this.loading=!0,this.errorMessage="";let e=this.loginForm.get("accessCode")?.value;try{(yield this.authService.login(e))?(console.log("Spr\xE1vny k\xF3d:",e),this.router.navigate(["/info"])):this.errorMessage="Nespr\xE1vny pr\xEDstupov\xFD k\xF3d. Sk\xFAste to znova."}catch(t){console.error("Chyba pri prihlasovan\xED",t),this.errorMessage="Nastala chyba pri overovan\xED k\xF3du. Sk\xFAste to pros\xEDm nesk\xF4r."}finally{this.loading=!1}})}static \u0275fac=function(t){return new(t||n)(c(k),c(y),c(h),c(S),c(x))};static \u0275cmp=f({type:n,selectors:[["app-login"]],decls:19,vars:5,consts:[[1,"login-container"],[1,"login-card"],[1,"title"],[1,"subtitle"],[1,"form-container"],[1,"access-label"],[3,"ngSubmit","formGroup"],[1,"input-group"],["type","text","formControlName","accessCode","placeholder","",1,"code-input"],["class","error-message",4,"ngIf"],["type","submit",1,"submit-button",3,"disabled"],[4,"ngIf"],[1,"welcome-message"],[1,"error-message"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"R&S"),i(),o(4,"p",3),r(5,"na\u0161a svadba"),i(),o(6,"div",4)(7,"p",5),r(8,"Pr\xEDstupov\xFD k\xF3d"),i(),o(9,"form",6),u("ngSubmit",function(){return a.onSubmit()}),o(10,"div",7),p(11,"input",8),i(),d(12,D,2,1,"div",9),o(13,"button",10),d(14,R,2,0,"span",11)(15,A,2,0,"span",11),i()()(),o(16,"div",12)(17,"p"),r(18,"Srde\u010Dne V\xE1s v\xEDtame na na\u0161om svadobnom webe"),i()()()()),t&2&&(s(9),l("formGroup",a.loginForm),s(3),l("ngIf",a.errorMessage),s(),l("disabled",a.loading),s(),l("ngIf",!a.loading),s(),l("ngIf",a.loading))},dependencies:[C,b,I,P,_,w,F,O,z],styles:['@font-face{font-family:Lucy Rose;src:url(/assets/fonts/lucyrose.woff2) format("woff2")}@font-face{font-family:Coldiac;src:url(/assets/fonts/coldiac.woff2) format("woff2")}@font-face{font-family:Dream Avenue;src:url(/assets/fonts/dreamavenue.woff2) format("woff2")}@font-face{font-family:Cinzel;src:url(/assets/fonts/cinzel.woff2) format("woff2")}[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f5f7ec}.login-container[_ngcontent-%COMP%]{width:100%;max-width:500px;padding:20px}.login-card[_ngcontent-%COMP%]{background-color:#ddbea9;border-radius:20px;padding:40px 20px;box-shadow:0 8px 24px #0000001a;position:relative;overflow:hidden}.title[_ngcontent-%COMP%]{font-family:Dream Avenue,cursive;font-size:4rem;color:#6b705c;text-align:center;margin:0}.subtitle[_ngcontent-%COMP%]{font-family:Coldiac,sans-serif;font-size:1.5rem;color:#6b705c;text-align:center;margin-top:0}.form-container[_ngcontent-%COMP%]{margin:40px 0}.access-label[_ngcontent-%COMP%]{font-family:Cinzel,serif;color:#6b705c;font-size:1.2rem;text-align:center;margin-bottom:10px}.code-input[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #c58c6e;border-radius:8px;background-color:#e9cbc1;font-family:Cinzel,serif;font-size:1.1rem;color:#6b705c;text-align:center}.code-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#6b705c}.error-message[_ngcontent-%COMP%]{color:#b22222;font-family:Cinzel,serif;font-size:.9rem;text-align:center;margin-top:10px}.submit-button[_ngcontent-%COMP%]{display:block;width:100%;background-color:#c58c6e;color:#fff;font-family:Cinzel,serif;border:none;border-radius:8px;padding:12px;margin-top:20px;font-size:1.1rem;cursor:pointer;transition:background-color .3s}.submit-button[_ngcontent-%COMP%]:hover{background-color:#6b705c}.welcome-message[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;background-color:#d4a7ac;padding:20px;border-top-left-radius:30px;width:50%}.welcome-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Coldiac,sans-serif;color:#6b705c;font-size:1rem;text-align:center;margin:0}']})};export{E as LoginComponent};
